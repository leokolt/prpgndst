{"version":3,"file":"index.js","sources":["index.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n\r\n    /************************************************************\r\n * Load more posts with button on front, tag & author page\r\n ***********************************************************/\r\n\r\n\t\tlet nextDom = document,\r\n\t\tbtnLoad = document.querySelector('.pagination__loadmore'),\r\n\t\tpostList = document.querySelector('.post-bottom__inner');\r\n\r\n\t\tasync function loadNextPage() {\r\n\t\t\tconst next = nextDom.querySelector('link[rel=\"next\"]');\r\n\t\t\tconst response = await fetch(next.href);\r\n\t\t\tnextDom = document.createRange().createContextualFragment(await response.text());\r\n\r\n\t\t}\r\n\r\n\t\tfunction noLoadNextPage() {\r\n\t\t\tloadNextPage().catch(() => {\r\n        btnLoad.innerHTML = \"Больше нет статей\";\r\n        btnLoad.setAttribute(\"disabled\", \"disabled\");\r\n\t\t\t\tif (!nextDom) {\r\n\t\t\t\t\tnextDom = document.createRange().createContextualFragment('');\r\n\t\t\t\t\tnextDom = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction toLoadMore() {\r\n\t\t\tbtnLoad.addEventListener('click', () => {\r\n\t\t\t\tnoLoadNextPage();\r\n\t\t\t\tfor (const post of nextDom.querySelectorAll('.post-bottom > div > .post-feed__item')) {\r\n\t\t\t\t\tpostList.appendChild(post);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\ttoLoadMore();\r\n\t\tnoLoadNextPage();\r\n\r\n\r\n\r\n});\r\n"],"names":["document","addEventListener","let","nextDom","btnLoad","querySelector","postList","noLoadNextPage","async","next","response","fetch","href","createRange","createContextualFragment","text","loadNextPage","catch","innerHTML","setAttribute","post","querySelectorAll","appendChild"],"mappings":"AAAAA,SAASC,iBAAiB,mBAAoB,KAM5CC,IAAIC,EAAUH,SACdI,EAAUJ,SAASK,cAAc,yBACjCC,EAAWN,SAASK,cAAc,uBASlC,SAASE,KAPTC,iBACC,IAAMC,EAAON,EAAQE,cAAc,oBACnC,MAAMK,QAAiBC,MAAMF,EAAKG,MAClCT,EAAUH,SAASa,cAAcC,+BAA+BJ,EAASK,QAKzEC,GAAeC,MAAM,KAChBb,EAAQc,UAAY,oBACpBd,EAAQe,aAAa,WAAY,YAChChB,IACJA,EAAUH,SAASa,cAAcC,yBAAyB,IAC1DX,GAAU,KAMZC,EAAQH,iBAAiB,QAAS,KACjCM,IACA,IAAK,MAAMa,KAAQjB,EAAQkB,iBAAiB,yCAC3Cf,EAASgB,YAAYF,KAKxBb"}