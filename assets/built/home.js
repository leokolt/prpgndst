document.addEventListener("DOMContentLoaded",()=>{let o=document,e=document.querySelector(".pagination__loadmore"),t=document.querySelector(".loop-archive__inner");function i(){!async function(){var e=o.querySelector('link[rel="next"]');const t=await fetch(e.href);o=document.createRange().createContextualFragment(await t.text())}().catch(()=>{e.innerHTML="Больше нет статей",e.setAttribute("disabled","disabled"),o||(o=document.createRange().createContextualFragment(""),o=!0)})}if(e.addEventListener("click",()=>{i();for(const e of o.querySelectorAll(".loop-archive > div > .loop-archive__item"))t.appendChild(e)}),i(),r=function(){var a="undefined"!=typeof window?window:this,e=a.Glider=function(e,t){var o=this;if(e._glider)return e._glider;if(o.ele=e,o.ele.classList.add("glider"),(o.ele._glider=o).opt=Object.assign({},{slidesToScroll:1,slidesToShow:1,resizeLock:!0,duration:.5,easing:function(e,t,o,i,r){return i*(t/=r)*t+o}},t),o.animate_id=o.page=o.slide=0,o.arrows={},o._opt=o.opt,o.opt.skipTrack)o.track=o.ele.children[0];else for(o.track=document.createElement("div"),o.ele.appendChild(o.track);1!==o.ele.children.length;)o.track.appendChild(o.ele.children[0]);o.track.classList.add("glider-track"),o.init(),o.resize=o.init.bind(o,!0),o.event(o.ele,"add",{scroll:o.updateControls.bind(o)}),o.event(a,"add",{resize:o.resize})},t=e.prototype;return t.init=function(e,t){var o,i=this,r=0,s=0,n=(i.slides=i.track.children,[].forEach.call(i.slides,function(e,t){e.classList.add("glider-slide"),e.setAttribute("data-gslide",t)}),i.containerWidth=i.ele.clientWidth,i.settingsBreakpoint());t=t||n,"auto"!==i.opt.slidesToShow&&void 0===i.opt._autoSlide||(o=i.containerWidth/i.opt.itemWidth,i.opt._autoSlide=i.opt.slidesToShow=i.opt.exactWidth?o:Math.max(1,Math.floor(o))),"auto"===i.opt.slidesToScroll&&(i.opt.slidesToScroll=Math.floor(i.opt.slidesToShow)),i.itemWidth=i.opt.exactWidth?i.opt.itemWidth:i.containerWidth/i.opt.slidesToShow,[].forEach.call(i.slides,function(e){e.style.height="auto",e.style.width=i.itemWidth+"px",r+=i.itemWidth,s=Math.max(e.offsetHeight,s)}),i.track.style.width=r+"px",i.trackWidth=r,i.isDrag=!1,i.preventClick=!1,i.opt.resizeLock&&i.scrollTo(i.slide*i.itemWidth,0),(n||t)&&(i.bindArrows(),i.buildDots(),i.bindDrag()),i.updateControls(),i.emit(e?"refresh":"loaded")},t.bindDrag=function(){function e(){t.mouseDown=void 0,t.ele.classList.remove("drag"),t.isDrag&&(t.preventClick=!0),t.isDrag=!1}var t=this,o=(t.mouse=t.mouse||t.handleMouse.bind(t),{mouseup:e,mouseleave:e,mousedown:function(e){e.preventDefault(),e.stopPropagation(),t.mouseDown=e.clientX,t.ele.classList.add("drag")},mousemove:t.mouse,click:function(e){t.preventClick&&(e.preventDefault(),e.stopPropagation()),t.preventClick=!1}});t.ele.classList.toggle("draggable",!0===t.opt.draggable),t.event(t.ele,"remove",o),t.opt.draggable&&t.event(t.ele,"add",o)},t.buildDots=function(){var e=this;if(e.opt.dots){if("string"==typeof e.opt.dots?e.dots=document.querySelector(e.opt.dots):e.dots=e.opt.dots,e.dots){e.dots.innerHTML="",e.dots.classList.add("glider-dots");for(var t=0;t<Math.ceil(e.slides.length/e.opt.slidesToShow);++t){var o=document.createElement("button");o.dataset.index=t,o.setAttribute("aria-label","Page "+(t+1)),o.setAttribute("role","tab"),o.className="glider-dot "+(t?"":"active"),e.event(o,"add",{click:e.scrollItem.bind(e,t,!0)}),e.dots.appendChild(o)}}}else e.dots&&(e.dots.innerHTML="")},t.bindArrows=function(){var o=this;o.opt.arrows?["prev","next"].forEach(function(e){var t=o.opt.arrows[e];!t||(t="string"==typeof t?document.querySelector(t):t)&&(t._func=t._func||o.scrollItem.bind(o,e),o.event(t,"remove",{click:t._func}),o.event(t,"add",{click:t._func}),o.arrows[e]=t)}):Object.keys(o.arrows).forEach(function(e){e=o.arrows[e];o.event(e,"remove",{click:e._func})})},t.updateControls=function(e){var l=this,t=(e&&!l.opt.scrollPropagate&&e.stopPropagation(),l.containerWidth>=l.trackWidth),a=(l.opt.rewind||(l.arrows.prev&&(l.arrows.prev.classList.toggle("disabled",l.ele.scrollLeft<=0||t),l.arrows.prev.setAttribute("aria-disabled",l.arrows.prev.classList.contains("disabled"))),l.arrows.next&&(l.arrows.next.classList.toggle("disabled",Math.ceil(l.ele.scrollLeft+l.containerWidth)>=Math.floor(l.trackWidth)||t),l.arrows.next.setAttribute("aria-disabled",l.arrows.next.classList.contains("disabled")))),l.slide=Math.round(l.ele.scrollLeft/l.itemWidth),l.page=Math.round(l.ele.scrollLeft/l.containerWidth),l.slide+Math.floor(Math.floor(l.opt.slidesToShow)/2)),d=Math.floor(l.opt.slidesToShow)%2?0:a+1;1===Math.floor(l.opt.slidesToShow)&&(d=0),l.ele.scrollLeft+l.containerWidth>=Math.floor(l.trackWidth)&&(l.page=l.dots?l.dots.children.length-1:0),[].forEach.call(l.slides,function(e,t){var o=e.classList,e=o.contains("visible"),i=l.ele.scrollLeft,r=l.ele.scrollLeft+l.containerWidth,s=l.itemWidth*t,n=s+l.itemWidth,s=([].forEach.call(o,function(e){/^left|right/.test(e)&&o.remove(e)}),o.toggle("active",l.slide===t),a===t||d&&d===t?o.add("center"):(o.remove("center"),o.add([t<a?"left":"right",Math.abs(t-(!(t<a)&&d||a))].join("-"))),Math.ceil(s)>=Math.floor(i)&&Math.floor(n)<=Math.ceil(r));o.toggle("visible",s),s!==e&&l.emit("slide-"+(s?"visible":"hidden"),{slide:t})}),l.dots&&[].forEach.call(l.dots.children,function(e,t){e.classList.toggle("active",l.page===t)}),e&&l.opt.scrollLock&&(clearTimeout(l.scrollLock),l.scrollLock=setTimeout(function(){clearTimeout(l.scrollLock),.02<Math.abs(l.ele.scrollLeft/l.itemWidth-l.slide)&&(l.mouseDown||l.trackWidth>l.containerWidth+l.ele.scrollLeft&&l.scrollItem(l.getCurrentSlide()))},l.opt.scrollLockDelay||250))},t.getCurrentSlide=function(){return this.round(this.ele.scrollLeft/this.itemWidth)},t.scrollItem=function(e,t,o){o&&o.preventDefault();var i,r=this,s=e;return++r.animate_id,e=!0===t?(e*=r.containerWidth,Math.round(e/r.itemWidth)*r.itemWidth):("string"==typeof e&&(o="prev"===e,e=r.opt.slidesToScroll%1||r.opt.slidesToShow%1?r.getCurrentSlide():r.slide,o?e-=r.opt.slidesToScroll:e+=r.opt.slidesToScroll,r.opt.rewind&&(i=r.ele.scrollLeft,e=o&&!i?r.slides.length:!o&&i+r.containerWidth>=Math.floor(r.trackWidth)?0:e)),e=Math.max(Math.min(e,r.slides.length),0),r.slide=e,r.itemWidth*e),r.scrollTo(e,r.opt.duration*Math.abs(r.ele.scrollLeft-e),function(){r.updateControls(),r.emit("animated",{value:s,type:"string"==typeof s?"arrow":t?"dot":"slide"})}),!1},t.settingsBreakpoint=function(){var e=this,t=e._opt.responsive;if(t){t.sort(function(e,t){return t.breakpoint-e.breakpoint});for(var o=0;o<t.length;++o){var i=t[o];if(a.innerWidth>=i.breakpoint)return e.breakpoint!==i.breakpoint&&(e.opt=Object.assign({},e._opt,i.settings),e.breakpoint=i.breakpoint,!0)}}var r=0!==e.breakpoint;return e.opt=Object.assign({},e._opt),e.breakpoint=0,r},t.scrollTo=function(t,o,i){var r=this,s=(new Date).getTime(),n=r.animate_id,l=function(){var e=(new Date).getTime()-s;r.ele.scrollLeft=r.ele.scrollLeft+(t-r.ele.scrollLeft)*r.opt.easing(0,e,0,1,o),e<o&&n===r.animate_id?a.requestAnimationFrame(l):(r.ele.scrollLeft=t,i&&i.call(r))};a.requestAnimationFrame(l)},t.removeItem=function(e){var t=this;t.slides.length&&(t.track.removeChild(t.slides[e]),t.refresh(!0),t.emit("remove"))},t.addItem=function(e){this.track.appendChild(e),this.refresh(!0),this.emit("add")},t.handleMouse=function(e){var t=this;t.mouseDown&&(t.isDrag=!0,t.ele.scrollLeft+=(t.mouseDown-e.clientX)*(t.opt.dragVelocity||3.3),t.mouseDown=e.clientX)},t.round=function(e){var t=1/(this.opt.slidesToScroll%1||1);return Math.round(e*t)/t},t.refresh=function(e){this.init(!0,e)},t.setOption=function(t,e){var o=this;o.breakpoint&&!e?o._opt.responsive.forEach(function(e){e.breakpoint===o.breakpoint&&(e.settings=Object.assign({},e.settings,t))}):o._opt=Object.assign({},o._opt,t),o.breakpoint=0,o.settingsBreakpoint()},t.destroy=function(){function e(t){t.removeAttribute("style"),[].forEach.call(t.classList,function(e){/^glider/.test(e)&&t.classList.remove(e)})}var t=this,o=t.ele.cloneNode(!0);o.children[0].outerHTML=o.children[0].innerHTML,e(o),[].forEach.call(o.getElementsByTagName("*"),e),t.ele.parentNode.replaceChild(o,t.ele),t.event(a,"remove",{resize:t.resize}),t.emit("destroy")},t.emit=function(e,t){e=new a.CustomEvent("glider-"+e,{bubbles:!this.opt.eventPropagate,detail:t});this.ele.dispatchEvent(e)},t.event=function(e,t,o){var i=e[t+"EventListener"].bind(e);Object.keys(o).forEach(function(e){i(e,o[e])})},e},"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r():r(),document.querySelector(".post-slider__posts")){new Glider(document.querySelector(".post-slider__posts"),{slidesToScroll:1,slidesToShow:1.5,scrollLock:!1,resizeLock:!1,draggable:!0,rewind:!0,scrollPropagate:!0,responsive:[{breakpoint:768,settings:{slidesToShow:2.5}},{breakpoint:1024,settings:{slidesToShow:3.5}},{breakpoint:1280,settings:{slidesToShow:4.5}},{breakpoint:1400,settings:{slidesToShow:5.5}}],arrows:{prev:".post-slider__prev",next:".post-slider__next"}});let e=document.querySelector(".post-slider__item:first-child"),t=document.querySelector(".post-slider__item:last-child");var r=(document.documentElement.clientWidth-document.querySelector(".wrapper").getBoundingClientRect().width)/2;e.style.marginLeft=r+"px",t.style.marginRight=r+"px"}if(document.querySelector(".loop-source__items")){var s=new Glider(document.querySelector(".loop-source__items"),{slidesToScroll:1,slidesToShow:1,draggable:!0,rewind:!0,responsive:[{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:1024,settings:{slidesToShow:3}},{breakpoint:1280,settings:{slidesToShow:4}},{breakpoint:1400,settings:{slidesToShow:5}}]});let t=setInterval(()=>{s.scrollItem("next")},3e3);document.querySelector(".loop-source__items").addEventListener("mouseover",e=>{null!=t&&(clearInterval(t),t=null)},300),document.querySelector(".loop-source__items").addEventListener("mouseout",e=>{null==t&&(t=setInterval(()=>{s.scrollItem("next")},3e3))},300)}let n=document.querySelector(".front-header__view");n.addEventListener("click",e=>{e.preventDefault(),document.documentElement.setAttribute("front-page",frontState),frontState="archive"===frontState?"section":"archive",localStorage.setItem("front-state",frontState),document.documentElement.setAttribute("front-page",frontState)})});
//# sourceMappingURL=home.js.map